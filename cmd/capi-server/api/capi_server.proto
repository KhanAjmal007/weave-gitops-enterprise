syntax = "proto3";

package capi_server.v1;

option go_package = "github.com/weaveworks/wks/cmd/capi-server/proto/capi_server";

import "google/api/annotations.proto";

service ClustersService {
  rpc ListTemplates(ListTemplatesRequest) returns (ListTemplatesResponse) {
    option (google.api.http) = {
      get : "/v1/templates"
    };
  }
  rpc ListTemplateParams(ListTemplateParamsRequest)
      returns (ListTemplateParamsResponse) {
    option (google.api.http) = {
      get : "/v1/templates/{template_name}/params"
    };
  }
  rpc RenderTemplate(RenderTemplateRequest)
      returns (RenderTemplateResponse) {
    option (google.api.http) = {
      post : "/v1/templates/{template_name}/render"
    };
  }
}
message RenderTemplateRequest { string template_name = 1; map<string, string> params = 2;}
message RenderTemplateResponse { string renderedTemplate = 1; }

message ListTemplateParamsRequest { string template_name = 1; }
message ListTemplateParamsResponse { repeated Param params = 1; }

message Param {
  string name = 1;
  string description = 2;
}

message Template {
  string name = 1;
  string description = 2;
  string version = 3;
  repeated Param params = 4;
}

message ListTemplatesRequest {}

message ListTemplatesResponse {
  repeated Template templates = 1;
  int32 total = 2;
}
